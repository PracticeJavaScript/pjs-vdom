<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/main.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">All files</a> / <a href="index.html">src</a> main.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/86</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/34</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/14</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/75</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*global history, requestAnimationFrame, location*/
&nbsp;
// DEPS
// ============================================================
&nbsp;
import WorkerT<span class="cstat-no" title="statement not covered" >hread from './worker.thread</span>'<span class="cstat-no" title="statement not covered" ></span>
import virtualize from<span class="cstat-no" title="statement not covered" > 'vdom-virtualize'<span class="cstat-no" title="statement not covered" ></span></span>
import toJson <span class="cstat-no" title="statement not covered" >from 'vdom-as-json/toJson'<span class="cstat-no" title="statement not covered" ></span></span>
import applyP<span class="cstat-no" title="statement not covered" >atch from 'vdom-serialized-patch/patch'<span class="cstat-no" title="statement not covered" ></span></span>
import { getLocalP<span class="cstat-no" title="statement not covered" >athname } from 'local-l</span>inks'
import { deboun<span class="cstat-no" title="statement not covered" >ce } from './helpers'</span>
<span class="cstat-no" title="statement not covered" >import './styles/main.styl'</span>
import {asse<span class="cstat-no" title="statement not covered" >rt} from 'chai'</span>
import probs from '<span class="cstat-no" title="statement not covered" >pjs-problems'<span class="cstat-no" title="statement not covered" ></span></span>
import analytics <span class="cstat-no" title="statement not covered" >from './analytics' // t</span>o include analytic<span class="cstat-no" title="statement not covered" >s snippets into bundle<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span></span></span>
&nbsp;
&nbsp;
// CONFIG
// ============================================================
&nbsp;
// Keys to ignore while user is navigating around the textarea but not changing any code
const ignoreKeyCodes = [
  9,  // Tab
  16, // Shift<span class="cstat-no" title="statement not covered" ></span>
  17, // Ctrl
  18, // Option
  37, // Left arrow
  39, // Right arrow
  38, // Up arrow
  40, // Down arrow
  91, // CMD-left
  93, // CMD-right
];
&nbsp;
// LOCAL STATE PERSIST
// ============================================================
&nbsp;
function <span class="fstat-no" title="function not covered" >getLocalState(</span>) {
  const localState <span class="cstat-no" title="statement not covered" >= localStorage.getItem('pjs_state'</span>)
  let parsedState = <span class="cstat-no" title="statement not covered" >false</span>
<span class="cstat-no" title="statement not covered" >  if (localState) {</span>
<span class="cstat-no" title="statement not covered" >    parsedState = JSON.parse(localState)</span>
  } else {
<span class="cstat-no" title="statement not covered" >    console.log('Error getting previous or no local config stored.')</span>
  }
<span class="cstat-no" title="statement not covered" >  return parsedState</span>
}
&nbsp;
function <span class="fstat-no" title="function not covered" >saveLocalState(</span>stateString) {
<span class="cstat-no" title="statement not covered" >  localStorage.setItem('pjs_state', stateString)</span>
  // console.log('Just saved local state:', stateString);
}
&nbsp;
&nbsp;
// WORKER EVENT DISPATCHER
// ============================================================
&nbsp;
// Create an instance of our worker.
// The actual loading of the script gets handled
// by webpack's worker-loader:
// https://www.npmjs.com/package/worker-loader
const worker <span class="cstat-no" title="statement not covered" >= new WorkerThread()</span>
&nbsp;
// The root element that contains our app markup
const rootElement <span class="cstat-no" title="statement not covered" >= document.body.firstChil</span>d
&nbsp;
// any time we get a message from the worker
// it will be a set of "patches" to apply to
// the real DOM. We do this on a requestAnimationFrame
// for minimal impact
<span class="cstat-no" title="statement not covered" >worker.onmessage = <span class="fstat-no" title="function not covered" >({</span>data}) =&gt; {<span class="cstat-no" title="statement not covered" ></span></span>
  const <span class="cstat-no" title="statement not covered" >{ url, pa</span>yload, ser<span class="cstat-no" title="statement not covered" >ializedState,</span> stateEvents } = d<span class="cstat-no" title="statement not covered" >ata<span class="cstat-no" title="statement not covered" ></span></span>
<span class="cstat-no" title="statement not covered" >  if (stateEvents) {</span>
<span class="cstat-no" title="statement not covered" >    stateEvents.forEach(<span class="fstat-no" title="function not covered" >ev</span>t =&gt; {</span>
      const event <span class="cstat-no" title="statement not covered" >= new CustomEvent(evt.name, { detail: evt.data }</span>);
<span class="cstat-no" title="statement not covered" >      window.dispatchEvent(event);</span>
    })
  }
<span class="cstat-no" title="statement not covered" >  requestAnimationFrame(<span class="fstat-no" title="function not covered" >()</span> =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    applyPatch(rootElement, payload)</span>
  })
  // we only want to update the URL
  // if it's different than the current
  // URL. Otherwise we keep pushing
  // the same url to the history with
  // each render
  if<span class="cstat-no" title="statement not covered" > (location.pathname !== url) {</span>
<span class="cstat-no" title="statement not covered" >    history.pushState(null, null, url)</span>
  }
  // save state to localstorage, so we can come back to it later
<span class="cstat-no" title="statement not covered" >  if (serializedState) {</span>
<span class="cstat-no" title="statement not covered" >    saveLocalState(serializedState)</span>
  }
}
&nbsp;
// we start things off by sending a virtual DOM
// representation of the *real* DOM along with
// the current URL to our worker
<span class="cstat-no" title="statement not covered" >worker.postMessage({type: 'start', payload: {</span>
  virtualDom: toJson(virtualize(rootElement)),
  url: location.pathname,
  localState: getLocalState()
}})
&nbsp;
// if the user hits the back/forward buttons
// pass the new url to the worker
wi<span class="cstat-no" title="statement not covered" >ndow.addEventListener('popstate', ()<span class="fstat-no" title="function not covered" > =</span>&gt; {</span>
<span class="cstat-no" title="statement not covered" >  worker.postMessage({type: 'setUrl', payload: location.pathname})</span>
})
&nbsp;
// listen for all clicks globally
do<span class="cstat-no" title="statement not covered" >cument.body.addEventListener('click', (e<span class="fstat-no" title="function not covered" >ve</span>nt) =&gt; {</span>
  // handles internal navigation defined as
  // clicks on &lt;a&gt; tags that have `href` that is
  // on the same origin.
  // https://www.npmjs.com/package/local-links
  const pathname <span class="cstat-no" title="statement not covered" >= getLocalPathname(event)</span>
<span class="cstat-no" title="statement not covered" >  if (pathname) {</span>
    // stop browser from following the link
<span class="cstat-no" title="statement not covered" >    event.preventDefault()</span>
    // instead, post the new URL to our worker
    // which will trigger compute a new vDom
    // based on that new URL state
    wor<span class="cstat-no" title="statement not covered" >ker.postMessage({type: 'setUrl', payload: pathname})</span>
<span class="cstat-no" title="statement not covered" >    return</span>
  }
&nbsp;
  // this is for other "onClick" type events we want to
  // respond to. We check existance of an `data-click`
  // attribute and if it exists, post that back.
  // In our case, the messages look like either
  // {type: "increment"}
  // or
  // {type: "decrement"}
  // but could contain any serializable payload
  // describing the action that occured
  const click <span class="cstat-no" title="statement not covered" >= event.target['data-click'</span>]
<span class="cstat-no" title="statement not covered" >  if (click) {</span>
<span class="cstat-no" title="statement not covered" >    event.preventDefault()</span>
<span class="cstat-no" title="statement not covered" >    worker.postMessage(click)</span>
  }
})
&nbsp;
// Listen for all keydown events globally,
// to bind the keyboard shortcuts, with different de-bounce for each
do<span class="cstat-no" title="statement not covered" >cument.body.addEventListener('keydown', (e<span class="fstat-no" title="function not covered" >ve</span>nt) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >  if (event.keyCode === 13 &amp;&amp; !event.shiftKey &amp;&amp; (event.metaKey || event.ctrlKey)) {</span>
<span class="cstat-no" title="statement not covered" >    event.preventDefault();</span>
<span class="cstat-no" title="statement not covered" >    worker.postMessage({type: 'next'})</span>
  }
})
&nbsp;
// allow tabs to indent within textarea
co<span class="cstat-no" title="statement not covered" >de.addEventListener('keydown', fu<span class="fstat-no" title="function not covered" >nc</span>tion(event) {</span>
<span class="cstat-no" title="statement not covered" >  if(event.keyCode === 9) { // tab was pressed</span>
    // get caret position/selection
    var start = <span class="cstat-no" title="statement not covered" >this.selectionStart;</span>
    var end = <span class="cstat-no" title="statement not covered" >this.selectionEnd;</span>
    var target = <span class="cstat-no" title="statement not covered" >event.target;</span>
    var value = <span class="cstat-no" title="statement not covered" >target.value;</span>
    // set textarea value to: text before caret + tab + text after caret
<span class="cstat-no" title="statement not covered" >    target.value = value.substring(0, start)</span>
      + "\t"
      + value.substring(end);
    // put caret at right position again (add one for the tab)
<span class="cstat-no" title="statement not covered" >    this.selectionStart = this.selectionEnd = start + 1;</span>
    // prevent the focus lose
<span class="cstat-no" title="statement not covered" >    event.preventDefault();</span>
  }
}, false)
&nbsp;
const debouncedCodeUpdate <span class="cstat-no" title="statement not covered" >= debounce(event =&gt; {<span class="fstat-no" title="function not covered" ></span></span>
  // ignore things like arrow keys for submissions
<span class="cstat-no" title="statement not covered" >  if (ignoreKeyCodes.indexOf(event.keyCode) === -1) {</span>
    const codeupdate <span class="cstat-no" title="statement not covered" >= event.target['data-codeupdate'</span>]
<span class="cstat-no" title="statement not covered" >    if (codeupdate) {</span>
<span class="cstat-no" title="statement not covered" >      worker.postMessage({type: 'codeupdate', payload: event.target.value})</span>
    }
  }
}, 200)
&nbsp;
// Listen for keyup events in code textarea
// to auto-submit the code in textarea for test validation,
co<span class="cstat-no" title="statement not covered" >de.addEventListener('keyup', debouncedCodeUpdate)</span>
&nbsp;
// catch updates, fire sounds when needed
wi<span class="cstat-no" title="statement not covered" >ndow.addEventListener('sound', e <span class="fstat-no" title="function not covered" >=&gt;</span> {</span>
<span class="cstat-no" title="statement not covered" >  if (e.detail) {</span>
    const audio <span class="cstat-no" title="statement not covered" >= document.getElementById(`sound-${e.detail.id}`</span>);
<span class="cstat-no" title="statement not covered" >    audio.currentTime = 0;</span>
<span class="cstat-no" title="statement not covered" >    audio.play();</span>
  }
});
&nbsp;
// catch updates, fire ga events when needed
<span class="cstat-no" title="statement not covered" >window.addEventListener('ga', <span class="fstat-no" title="function not covered" >e </span>=&gt; {</span>
<span class="cstat-no" title="statement not covered" >  if (e.detail) {</span>
    // console.log('e.detail:', e.detail);
<span class="cstat-no" title="statement not covered" >    ga('send', e.detail);</span>
  }
});
&nbsp;
// Lazy-load the rest of the content after the app's booted
// function lazyLoadContent() {
//   // require.ensure([], () =&gt; {
//     // const probs = require('pjs-problems');
//     const problems = [];
//     Object.entries(probs).forEach(subject =&gt; {
//       // send all content except initial, since we already have it
//       if (subject[0] !== 'initial') {
//         problems.push(...subject[1])
//       }
//     })
//     worker.postMessage({type: 'newproblems', payload: problems})
//   // })
// }
// // lazy-load that additional problem content
// lazyLoadContent();
// window.addEventListener('load', lazyLoadContent)
&nbsp;
// register service worker
<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >fu</span>nction() {</span>
<span class="cstat-no" title="statement not covered" >  if('serviceWorker' in navigator) {</span>
<span class="cstat-no" title="statement not covered" >    navigator.serviceWorker.register('/sw.js');</span>
  }
})();
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sat Jun 17 2017 15:09:44 GMT-0600 (MDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
